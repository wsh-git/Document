# 定义：

指针变量就是存储其它变量的地址的变量；

可以通过指针得到其它变量的地址；

也可以根据该地址得到其它变量具体的值；

# 声明：

变量类型* 指针变量名（比较常用的写法）

变量类型 *指针变量名（不常见这种写法）

## 注意：

任何变量类型都可以声明为指针变量类型；就是在变量类型后面加一个*；

指针变量常用命名规范：p或ptr作为前缀，_p 或 _ptr 作为后缀；

```c++
int* p_int;
char* p_char;
```

# 初始化：

```c++
int a = 1;
int* p_a = &a;
cout << *p_a << endl;
```

## 注意：

为什么要用相同的变量类型的指针去存储地址

主要是因为一个变量所占的内存单元可能是多个，而指针变量储存的是它第一个内存单元的地址；

如果指针变量类型和存储的变量类型不一致，那么之后就无法准确的读取对应个数的内存单元来获取其中的内容；

# 空指针：

不指向任何有效内存的指针；

给指针赋值为nullptr或NULL(老版本)表示该指针为空指针；

```c++
int* p_int;
p_int = nullptr;
```

# 野指针：

指向无效或不可预知内存地址的指针；

野指针会导致程序出现各种不可预料的错误；比如程序崩溃、数据损坏、访问非法内存等等；

## 野指针主要出现的原因：

未初始化的指针（目前主要遇到的为该种情况）；

指向内存被释放后仍使用的指针；

指向内存位置超出作用域的指针；

指向未定义为分配的内存的指针；

## 注意：

在声明指针时，如果不马上使用，建议将指针声明为空指针；

# 指针变量所占空间：

不管何种变量类型的指针变量，所占的内存空间都是一样的；

因为它是用来存储变量的内存地址的，也就是存储内存单元的地址；

内存单元的地址是有范围限制的，不需要因为变量类型的不同而改变大小；

在不同位数的操作系统和不同编译器设置上，指针所占的字节数有所不同：

32位：4字节

64位：8字节（常见）

# &*混合使用：

1. &*

使用时从右向左开始；

表示先获取指针指向地址的值，再获取该值的地址；

相当于获取指针指向的内存地址；

2. *&

使用时从右向左开始；

表示先获取变量的地址，再获取该地址中存储的值；

相当于时获取一个变量的值；

# 指针的自增减运算：

自增：将指针向前移动一个元素的大小；

自减：将指针向后移动一个元素的大小；

元素大小：指针变量类型决定的，sizeof(指针变量类型)得到的就是元素的大小；

# 空类型指针：

是一种特殊的指针；它表示不特定类型的指针；

指针变量可以指向任意的变量类型；具体存放何种类型，由后续赋值决定；

赋值后如果需要使用需要强转为对应的数据类型；

```c++
void* p_void; // 空类型指针；
int a = 1;
p_void = &a;
cout << p_void << endl;
int b = *(int*)p_void;
cout << b << endl;
```

# 指向常量的指针：

## 定义：

指向常量的指针，并不是只能指向常量，也可以指向普通变量；

这样命名的主要原因就是这种指针不能改变值，类似常量的特点；

## 声明：

指向常量的指针，在*前面加一个const；

## 注意：

可以改变指针指向的地址，但是不能改变值（不能直接改变指针指向地址的值）；

## 举例：

```c++
int a = 1;
int b = 1;
const int* p_a = &a; // 在*前面加上const关键字的指针
// *p_a = 3; // 这样编译器是不允许的，不能改变值

p_a = &b; // 这个是允许的，是可以改变指向的；

// 另外一种声明的方法
int const* p_b = &b; // 也是可以的
```

# 指针常量：

## 定义：

不能指向常量，可以指向普通变量；

这样命名的主要原因是这种指针不能改变指向，但是可以改变指向地址中的存储的值；

## 声明：

在*后加上const；

## 注意：

不能改变指针指向的地址，但是可以改变指向的值的内容（指针指向地址中的值）；

## 举例：

```c++
int a = 1;
int b = 1;
int* const p_a = &a;
*p_a = 3; // 是可以改变指针指向的内容的；
// p_a = &b; // 这里是不允许改变指针指向的；

// 不能指向常量，因为它的特点和常量的特点冲突了
int const ic = 99;
// int* const p_ic = &ic; // 这样的写法是会编译出错的
```

# 指向常量的指针常量：

指向常量的指针：可以改变地址指向，不能改变地址中存储的值；

指针常量：不能改变指针指向的地址，但是可以改变地址中的值；

如果想要地址和值都不能改变，那么就可以构建一个指向常量的指针常量了；

即：*前后都要加上const；

## 举例：

```c++
const int a = 1;
int const b = 1; // 这两种声明常量的方式都是可以的

// 指向常量的指针常量
const int* const p_a = &a;
// 或者这样声明
int const* const p_b = &b;

// 不能改变指向
// p_a = &b;
// p_b = &a; // 以上这两种写法都是不允许的，都是会编译出错的

// 不能改变指向地址中的值
// *p_a = 3;
// *P_b = 3; // 以上这两种写法都是不允许的，都是会编译出错的
```